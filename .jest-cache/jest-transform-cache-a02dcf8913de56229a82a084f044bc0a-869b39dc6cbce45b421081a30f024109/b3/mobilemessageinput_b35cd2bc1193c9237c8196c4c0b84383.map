{"version":3,"sources":["/Users/elicharlese/CascadeProjects/ECE-AGENT/components/chat/mobile-message-input.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { Send, Plus, X, Bot, Calculator, Calendar, GamepadIcon, Sparkles, Zap, Brain } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { EmojiPicker } from \"./emoji-picker\"\nimport { FileUpload } from \"./file-upload\"\nimport { GifPicker } from \"./gif-picker\"\nimport { useHaptics } from \"@/hooks/use-haptics\"\nimport { useMobileKeyboard } from \"@/hooks/use-mobile-keyboard\"\n\ninterface MobileMessageInputProps {\n  value: string\n  onChange: (value: string) => void\n  onSend: () => void\n  onEmojiSelect: (emoji: string) => void\n  onFileSelect: (file: File, type: string) => void\n  onGifSelect?: (gif: {\n    id: string\n    title: string\n    url: string\n    preview_url: string\n    width: number\n    height: number\n  }) => void\n  onLaunchApp?: (appId: string, appName: string) => void\n  onAgentToggle?: (enabled: boolean) => void\n  placeholder?: string\n}\n\nexport function MobileMessageInput({\n  value,\n  onChange,\n  onSend,\n  onEmojiSelect,\n  onFileSelect,\n  onGifSelect,\n  onLaunchApp,\n  onAgentToggle,\n  placeholder = \"Type a message...\",\n}: MobileMessageInputProps) {\n  const [isExpanded, setIsExpanded] = useState(false)\n  const [showActions, setShowActions] = useState(false)\n  const [agentMode, setAgentMode] = useState(false)\n  const [activeTab, setActiveTab] = useState<\"media\" | \"apps\" | \"agents\">(\"media\")\n  const textareaRef = useRef<HTMLTextAreaElement>(null)\n  const { triggerHaptic } = useHaptics()\n  const { isKeyboardOpen } = useMobileKeyboard()\n\n  // Auto-resize textarea\n  useEffect(() => {\n    const textarea = textareaRef.current\n    if (textarea) {\n      textarea.style.height = \"auto\"\n      const scrollHeight = textarea.scrollHeight\n      textarea.style.height = `${Math.min(scrollHeight, 120)}px`\n      setIsExpanded(scrollHeight > 44)\n    }\n  }, [value])\n\n  const handleSend = () => {\n    if (!value.trim()) return\n    onSend()\n    triggerHaptic(\"light\")\n    setIsExpanded(false)\n  }\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault()\n      handleSend()\n    }\n  }\n\n  const toggleActions = () => {\n    setShowActions(!showActions)\n    triggerHaptic(\"selection\")\n  }\n\n  const handleAgentToggle = () => {\n    const newAgentMode = !agentMode\n    setAgentMode(newAgentMode)\n    onAgentToggle?.(newAgentMode)\n    triggerHaptic(\"success\")\n  }\n\n  const handleAppLaunch = (appId: string, appName: string) => {\n    onLaunchApp?.(appId, appName)\n    setShowActions(false)\n    triggerHaptic(\"medium\")\n  }\n\n  const quickApps = [\n    { id: \"calculator\", name: \"Calculator\", icon: Calculator, color: \"bg-blue-500\" },\n    { id: \"tic-tac-toe\", name: \"Tic Tac Toe\", icon: GamepadIcon, color: \"bg-green-500\" },\n    { id: \"event-planner\", name: \"Event Planner\", icon: Calendar, color: \"bg-purple-500\" },\n  ]\n\n  const aiAgents = [\n    {\n      id: \"smart-assistant\",\n      name: \"Smart Assistant\",\n      icon: Brain,\n      color: \"bg-indigo-500\",\n      description: \"General AI helper\",\n    },\n    {\n      id: \"code-companion\",\n      name: \"Code Companion\",\n      icon: Zap,\n      color: \"bg-orange-500\",\n      description: \"Programming assistant\",\n    },\n    {\n      id: \"creative-writer\",\n      name: \"Creative Writer\",\n      icon: Sparkles,\n      color: \"bg-pink-500\",\n      description: \"Writing & content\",\n    },\n  ]\n\n  return (\n    <div\n      className={`\n      border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 \n      transition-all duration-200 ease-in-out\n      ${isKeyboardOpen ? \"pb-safe\" : \"pb-4\"}\n    `}\n    >\n      {/* Enhanced Action Panel */}\n      {showActions && (\n        <div className=\"border-b border-gray-200 dark:border-gray-700\">\n          {/* Tab Navigation */}\n          <div className=\"flex items-center justify-between px-3 py-2 bg-gray-50 dark:bg-gray-700\">\n            <div className=\"flex items-center gap-1\">\n              <Button\n                variant={activeTab === \"media\" ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => setActiveTab(\"media\")}\n                className=\"text-xs\"\n              >\n                Media\n              </Button>\n              <Button\n                variant={activeTab === \"apps\" ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => setActiveTab(\"apps\")}\n                className=\"text-xs\"\n              >\n                Apps\n              </Button>\n              <Button\n                variant={activeTab === \"agents\" ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => setActiveTab(\"agents\")}\n                className=\"text-xs\"\n              >\n                Agents\n              </Button>\n            </div>\n            <Button variant=\"ghost\" size=\"sm\" onClick={toggleActions}>\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          {/* Tab Content */}\n          <div className=\"p-3\">\n            {activeTab === \"media\" && (\n              <div className=\"space-y-3\">\n                <div className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Media & Content</div>\n                <div className=\"flex items-center gap-2\">\n                  <FileUpload onFileSelect={onFileSelect} />\n                  <EmojiPicker onEmojiSelect={onEmojiSelect} />\n                  {onGifSelect && <GifPicker onGifSelect={onGifSelect} />}\n                </div>\n              </div>\n            )}\n\n            {activeTab === \"apps\" && (\n              <div className=\"space-y-3\">\n                <div className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Quick Apps</div>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {quickApps.map((app) => (\n                    <Button\n                      key={app.id}\n                      variant=\"outline\"\n                      className=\"flex flex-col items-center gap-2 h-auto py-3 bg-transparent\"\n                      onClick={() => handleAppLaunch(app.id, app.name)}\n                    >\n                      <div className={`p-2 rounded-full ${app.color} text-white`}>\n                        <app.icon className=\"h-4 w-4\" />\n                      </div>\n                      <span className=\"text-xs\">{app.name}</span>\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {activeTab === \"agents\" && (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">AI Agents</div>\n                  <Badge variant={agentMode ? \"default\" : \"secondary\"} className=\"text-xs\">\n                    {agentMode ? \"Active\" : \"Inactive\"}\n                  </Badge>\n                </div>\n                <div className=\"space-y-2\">\n                  {aiAgents.map((agent) => (\n                    <Button\n                      key={agent.id}\n                      variant=\"outline\"\n                      className=\"flex items-center gap-3 w-full justify-start h-auto py-3 bg-transparent\"\n                      onClick={() => handleAppLaunch(agent.id, agent.name)}\n                    >\n                      <div className={`p-2 rounded-full ${agent.color} text-white`}>\n                        <agent.icon className=\"h-4 w-4\" />\n                      </div>\n                      <div className=\"flex flex-col items-start\">\n                        <span className=\"text-sm font-medium\">{agent.name}</span>\n                        <span className=\"text-xs text-gray-500\">{agent.description}</span>\n                      </div>\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Input row with enhanced controls */}\n      <div className=\"flex items-end gap-3 px-4 py-3\">\n        {!showActions && (\n          <Button variant=\"ghost\" size=\"sm\" onClick={toggleActions} className=\"mb-1\">\n            <Plus className=\"h-4 w-4\" />\n          </Button>\n        )}\n\n        <Button\n          variant={agentMode ? \"default\" : \"ghost\"}\n          size=\"sm\"\n          onClick={handleAgentToggle}\n          className={`mb-1 ${agentMode ? \"bg-indigo-500 hover:bg-indigo-600 text-white\" : \"\"}`}\n        >\n          <Bot className=\"h-4 w-4\" />\n        </Button>\n\n        <div className=\"flex-1 relative\">\n          <Textarea\n            ref={textareaRef}\n            value={value}\n            onChange={(e) => onChange(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder={agentMode ? \"Ask AI or type a message...\" : placeholder}\n            className={`\n              resize-none border-0 bg-gray-50 dark:bg-gray-700 rounded-full px-4 py-3\n              min-h-[44px] max-h-[120px] text-base leading-5\n              focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-600\n              flex items-center\n              ${isExpanded ? \"rounded-2xl py-3\" : \"py-3\"}\n              ${agentMode ? \"ring-2 ring-indigo-200 dark:ring-indigo-800\" : \"\"}\n            `}\n            style={{\n              lineHeight: \"1.25\",\n              paddingTop: isExpanded ? \"12px\" : \"11px\",\n              paddingBottom: isExpanded ? \"12px\" : \"11px\",\n            }}\n            rows={1}\n          />\n\n          {agentMode && (\n            <div className=\"absolute -top-6 left-2 flex items-center gap-1\">\n              <Bot className=\"h-3 w-3 text-indigo-500\" />\n              <span className=\"text-xs text-indigo-600 dark:text-indigo-400\">AI Mode</span>\n            </div>\n          )}\n\n          {/* Character count for long messages */}\n          {value.length > 100 && (\n            <div className=\"absolute -top-6 right-2 text-xs text-gray-500 dark:text-gray-400\">{value.length}/1000</div>\n          )}\n        </div>\n\n        <Button\n          onClick={handleSend}\n          disabled={!value.trim()}\n          className={`\n            rounded-full h-8 w-8 p-0 mb-1\n            ${agentMode ? \"bg-indigo-500 hover:bg-indigo-600\" : \"bg-blue-500 hover:bg-blue-600\"} text-white\n            disabled:bg-gray-300 dark:disabled:bg-gray-600\n            transition-all duration-200\n            ${value.trim() ? \"scale-100\" : \"scale-95 opacity-50\"}\n          `}\n        >\n          <Send className=\"h-4 w-4\" />\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":["MobileMessageInput","value","onChange","onSend","onEmojiSelect","onFileSelect","onGifSelect","onLaunchApp","onAgentToggle","placeholder","isExpanded","setIsExpanded","useState","showActions","setShowActions","agentMode","setAgentMode","activeTab","setActiveTab","textareaRef","useRef","triggerHaptic","useHaptics","isKeyboardOpen","useMobileKeyboard","useEffect","textarea","current","style","height","scrollHeight","Math","min","handleSend","trim","handleKeyPress","e","key","shiftKey","preventDefault","toggleActions","handleAgentToggle","newAgentMode","handleAppLaunch","appId","appName","quickApps","id","name","icon","Calculator","color","GamepadIcon","Calendar","aiAgents","Brain","description","Zap","Sparkles","div","className","Button","variant","size","onClick","X","FileUpload","EmojiPicker","GifPicker","map","app","span","Badge","agent","Plus","Bot","Textarea","ref","target","onKeyPress","lineHeight","paddingTop","paddingBottom","rows","length","disabled","Send"],"mappings":"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"}