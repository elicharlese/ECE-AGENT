{"version":3,"sources":["/Users/elicharlese/CascadeProjects/ECE-AGENT/__tests__/components/ErrorBoundary.test.tsx"],"sourcesContent":["import { render, screen, fireEvent } from '@testing-library/react'\nimport { ErrorBoundary, ChatErrorBoundary } from '@/components/ErrorBoundary'\n\n// Component that throws an error for testing\nfunction ThrowError({ shouldThrow = false }: { shouldThrow?: boolean }) {\n  if (shouldThrow) {\n    throw new Error('Test error')\n  }\n  return <div>No error</div>\n}\n\ndescribe('ErrorBoundary', () => {\n  // Suppress console.error for these tests\n  const originalError = console.error\n  beforeAll(() => {\n    console.error = jest.fn()\n  })\n  afterAll(() => {\n    console.error = originalError\n  })\n\n  it('renders children when there is no error', () => {\n    render(\n      <ErrorBoundary>\n        <ThrowError />\n      </ErrorBoundary>\n    )\n    \n    expect(screen.getByText('No error')).toBeInTheDocument()\n  })\n\n  it('renders error fallback when child throws error', () => {\n    render(\n      <ErrorBoundary>\n        <ThrowError shouldThrow />\n      </ErrorBoundary>\n    )\n    \n    expect(screen.getByText('Something went wrong')).toBeInTheDocument()\n    expect(screen.getByText('Test error')).toBeInTheDocument()\n    expect(screen.getByRole('button', { name: /try again/i })).toBeInTheDocument()\n  })\n\n  it('calls retry function when retry button is clicked', () => {\n    render(\n      <ErrorBoundary>\n        <ThrowError shouldThrow />\n      </ErrorBoundary>\n    )\n    \n    const retryButton = screen.getByRole('button', { name: /try again/i })\n    fireEvent.click(retryButton)\n    \n    // After retry, should render children again (no error)\n    expect(screen.getByText('No error')).toBeInTheDocument()\n  })\n\n  it('calls onError callback when error occurs', () => {\n    const mockOnError = jest.fn()\n    \n    render(\n      <ErrorBoundary onError={mockOnError}>\n        <ThrowError shouldThrow />\n      </ErrorBoundary>\n    )\n    \n    expect(mockOnError).toHaveBeenCalledWith(\n      expect.any(Error),\n      expect.objectContaining({\n        componentStack: expect.any(String)\n      })\n    )\n  })\n\n  it('renders custom fallback component when provided', () => {\n    const CustomFallback = ({ error, retry }: { error: Error; retry: () => void }) => (\n      <div>\n        <span>Custom error: {error.message}</span>\n        <button onClick={retry}>Custom retry</button>\n      </div>\n    )\n\n    render(\n      <ErrorBoundary fallback={CustomFallback}>\n        <ThrowError shouldThrow />\n      </ErrorBoundary>\n    )\n    \n    expect(screen.getByText('Custom error: Test error')).toBeInTheDocument()\n    expect(screen.getByRole('button', { name: /custom retry/i })).toBeInTheDocument()\n  })\n})\n\ndescribe('ChatErrorBoundary', () => {\n  const originalError = console.error\n  beforeAll(() => {\n    console.error = jest.fn()\n  })\n  afterAll(() => {\n    console.error = originalError\n  })\n\n  it('renders chat-specific error fallback', () => {\n    render(\n      <ChatErrorBoundary>\n        <ThrowError shouldThrow />\n      </ChatErrorBoundary>\n    )\n    \n    expect(screen.getByText('Chat unavailable')).toBeInTheDocument()\n    expect(screen.getByText('Unable to load the chat interface.')).toBeInTheDocument()\n    expect(screen.getByRole('button', { name: /retry/i })).toBeInTheDocument()\n  })\n\n  it('has proper styling for chat context', () => {\n    render(\n      <ChatErrorBoundary>\n        <ThrowError shouldThrow />\n      </ChatErrorBoundary>\n    )\n    \n    const container = screen.getByText('Chat unavailable').closest('div')\n    expect(container).toHaveClass('h-full', 'flex', 'items-center', 'justify-center')\n  })\n})\n"],"names":["ThrowError","shouldThrow","Error","div","describe","originalError","console","error","beforeAll","jest","fn","afterAll","it","render","ErrorBoundary","expect","screen","getByText","toBeInTheDocument","getByRole","name","retryButton","fireEvent","click","mockOnError","onError","toHaveBeenCalledWith","any","objectContaining","componentStack","String","CustomFallback","retry","span","message","button","onClick","fallback","ChatErrorBoundary","container","closest","toHaveClass"],"mappings":"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"}