{"version":3,"sources":["/Users/elicharlese/CascadeProjects/ECE-AGENT/hooks/use-agents.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { agentService, type Agent } from '@/services/agent-service'\nimport type { AgentCreateInput } from '@/src/types/agent'\n\nexport function useAgentsQuery() {\n  return useQuery<Agent[], Error>({\n    queryKey: ['agents'],\n    queryFn: () => agentService.getAgents(),\n    // Keep data fresh enough for UI but avoid constant refetching\n    staleTime: 60_000, // 1 min\n    gcTime: 300_000,   // 5 min\n    refetchOnWindowFocus: 'always',\n    refetchOnReconnect: true,\n  })\n}\n\nexport function useCreateAgentMutation() {\n  const queryClient = useQueryClient()\n  return useMutation({\n    mutationFn: (input: AgentCreateInput) => agentService.createAgent(input),\n    onSuccess: (newAgent) => {\n      // Optimistically update list cache\n      queryClient.setQueryData<Agent[] | undefined>(['agents'], (old) => {\n        if (!old) return [newAgent]\n        return [newAgent, ...old]\n      })\n    },\n    onSettled: () => {\n      queryClient.invalidateQueries({ queryKey: ['agents'] })\n    },\n  })\n}\n"],"names":["useAgentsQuery","useCreateAgentMutation","useQuery","queryKey","queryFn","agentService","getAgents","staleTime","gcTime","refetchOnWindowFocus","refetchOnReconnect","queryClient","useQueryClient","useMutation","mutationFn","input","createAgent","onSuccess","newAgent","setQueryData","old","onSettled","invalidateQueries"],"mappings":";;;;;;;;;;;QAIgBA;eAAAA;;QAYAC;eAAAA;;;4BAhBsC;8BACb;AAGlC,SAASD;IACd,OAAOE,IAAAA,oBAAQ,EAAiB;QAC9BC,UAAU;YAAC;SAAS;QACpBC,SAAS,IAAMC,0BAAY,CAACC,SAAS;QACrC,8DAA8D;QAC9DC,WAAW;QACXC,QAAQ;QACRC,sBAAsB;QACtBC,oBAAoB;IACtB;AACF;AAEO,SAAST;IACd,MAAMU,cAAcC,IAAAA,0BAAc;IAClC,OAAOC,IAAAA,uBAAW,EAAC;QACjBC,YAAY,CAACC,QAA4BV,0BAAY,CAACW,WAAW,CAACD;QAClEE,WAAW,CAACC;YACV,mCAAmC;YACnCP,YAAYQ,YAAY,CAAsB;gBAAC;aAAS,EAAE,CAACC;gBACzD,IAAI,CAACA,KAAK,OAAO;oBAACF;iBAAS;gBAC3B,OAAO;oBAACA;uBAAaE;iBAAI;YAC3B;QACF;QACAC,WAAW;YACTV,YAAYW,iBAAiB,CAAC;gBAAEnB,UAAU;oBAAC;iBAAS;YAAC;QACvD;IACF;AACF"}