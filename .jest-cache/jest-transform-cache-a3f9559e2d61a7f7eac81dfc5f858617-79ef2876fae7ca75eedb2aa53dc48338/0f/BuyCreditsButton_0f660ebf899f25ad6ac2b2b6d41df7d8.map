{"version":3,"sources":["/Users/elicharlese/CascadeProjects/AGENT/components/credits/BuyCreditsButton.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { CREDITS_ENABLED } from '@/lib/pricing'\nimport { toast } from 'sonner'\n\ninterface BuyCreditsButtonProps {\n  packageId?: string\n  label?: string\n  size?: 'sm' | 'default' | 'lg' | 'icon'\n  className?: string\n}\n\nexport function BuyCreditsButton({ packageId = 'credits_100', label = 'Buy Credits', size = 'sm', className }: BuyCreditsButtonProps) {\n  const [loading, setLoading] = useState(false)\n  if (!CREDITS_ENABLED) return null\n\n  const onClick = async () => {\n    try {\n      setLoading(true)\n      const res = await fetch('/api/stripe/checkout', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ packageId }),\n      })\n      const data = await res.json()\n      if (!res.ok || !data.url) {\n        toast.error(data.error || 'Unable to start checkout')\n        return\n      }\n      window.location.href = data.url\n    } catch (e: unknown) {\n      const message = e instanceof Error ? e.message : 'Checkout failed'\n      toast.error(message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Button variant=\"outline\" size={size} onClick={onClick} disabled={loading} className={className}>\n      {loading ? 'Redirectingâ€¦' : label}\n    </Button>\n  )\n}\n"],"names":["BuyCreditsButton","packageId","label","size","className","loading","setLoading","useState","CREDITS_ENABLED","onClick","res","fetch","method","headers","body","JSON","stringify","data","json","ok","url","toast","error","window","location","href","e","message","Error","Button","variant","disabled"],"mappings":"AAAA;;;;;+BAcgBA;;;eAAAA;;;;uBAZS;wBACF;yBACS;wBACV;AASf,SAASA,iBAAiB,EAAEC,YAAY,aAAa,EAAEC,QAAQ,aAAa,EAAEC,OAAO,IAAI,EAAEC,SAAS,EAAyB;IAClI,MAAM,CAACC,SAASC,WAAW,GAAGC,IAAAA,eAAQ,EAAC;IACvC,IAAI,CAACC,wBAAe,EAAE,OAAO;IAE7B,MAAMC,UAAU;QACd,IAAI;YACFH,WAAW;YACX,MAAMI,MAAM,MAAMC,MAAM,wBAAwB;gBAC9CC,QAAQ;gBACRC,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9CC,MAAMC,KAAKC,SAAS,CAAC;oBAAEf;gBAAU;YACnC;YACA,MAAMgB,OAAO,MAAMP,IAAIQ,IAAI;YAC3B,IAAI,CAACR,IAAIS,EAAE,IAAI,CAACF,KAAKG,GAAG,EAAE;gBACxBC,aAAK,CAACC,KAAK,CAACL,KAAKK,KAAK,IAAI;gBAC1B;YACF;YACAC,OAAOC,QAAQ,CAACC,IAAI,GAAGR,KAAKG,GAAG;QACjC,EAAE,OAAOM,GAAY;YACnB,MAAMC,UAAUD,aAAaE,QAAQF,EAAEC,OAAO,GAAG;YACjDN,aAAK,CAACC,KAAK,CAACK;QACd,SAAU;YACRrB,WAAW;QACb;IACF;IAEA,qBACE,qBAACuB,cAAM;QAACC,SAAQ;QAAU3B,MAAMA;QAAMM,SAASA;QAASsB,UAAU1B;QAASD,WAAWA;kBACnFC,UAAU,iBAAiBH;;AAGlC"}